const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/client.Cq9ojXVr.js","_astro/preload-helper.BlTxHScW.js"])))=>i.map(i=>d[i]);
import{_ as d}from"./preload-helper.BlTxHScW.js";class f extends HTMLElement{closeBtn=this.querySelector("button[data-search-close-button]");dialog=this.querySelector("dialog");fuse=null;input=this.querySelector("input[data-search-input]");onCloseClick=()=>this.dialog.close();onDialogClick=e=>{e.target.nodeName==="DIALOG"&&this.dialog.close()};onDialogClose=()=>{this.input.value="",this.results.innerHTML=""};onInput=async()=>{const{input:e,results:s}=this,l=e.value.trim();if(!l){s.innerHTML="";return}const r=(await this.load()).search(l,{limit:8});if(!r.length){s.innerHTML='<li class="no-result">No results</li>';return}s.innerHTML=r.map(o=>{let a=o.item.frontmatter.title;const c=o.matches?.find(t=>t.key==="frontmatter.title");if(c){const t=[],h=[...c.indices];let i=h.shift();for(let n=0;n<a.length;n+=1){const u=a.charAt(n);i&&n===i[0]&&t.push("<b>"),t.push(u),i&&n===i[1]&&(t.push("</b>"),i=h.shift())}a=t.join("")}return`<li class="item"><a href="${o.item.pathname.replace(/\/$/,"")}">${a}</a></li>`}).join("")};onSearch=()=>{this.dialog.showModal(),this.load()};results=this.querySelector("ul[data-search-result]");connectedCallback(){window.addEventListener("search",this.onSearch),this.dialog.addEventListener("close",this.onDialogClose),this.dialog.addEventListener("click",this.onDialogClick),this.closeBtn.addEventListener("click",this.onCloseClick),this.input.addEventListener("input",this.onInput)}disconnectedCallback(){window.removeEventListener("search",this.onSearch)}async load(){if(this.fuse)return this.fuse;const{loadFuse:e}=await d(async()=>{const{loadFuse:s}=await import("./client.Cq9ojXVr.js");return{loadFuse:s}},__vite__mapDeps([0,1]));return this.fuse=await e({options:{includeMatches:!0,threshold:.3}})}}customElements.define("custom-search-layer",f);
