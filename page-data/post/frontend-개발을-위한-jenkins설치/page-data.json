{"componentChunkName":"component---src-templates-post-jsx","path":"/post/frontend-개발을-위한-jenkins설치","result":{"data":{"markdownRemark":{"id":"00b84a18-10da-586d-8971-24a5774ad8ef","html":"<blockquote>\n<p>CentOS 7.7 기준으로 작성</p>\n</blockquote>\n<h1 id=\"master-slave-공통\" style=\"position:relative;\"><a href=\"#master-slave-%EA%B3%B5%ED%86%B5\" aria-label=\"master slave 공통 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Master, Slave 공통</h1>\n<p>패키지 업데이트, JDK설치</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> yum update\n<span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> -y java-1.8.0-openjdk-devel <span class=\"token function\">git</span></code></pre></div>\n<p>사내망일 경우 프록시 설정 필요</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">vim</span> .bash_profile\n\n<span class=\"token comment\"># 맨밑에 아래 내용 추가</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">http_proxy</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>프록시 서버 주소<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HTTP_PROXY</span><span class=\"token operator\">=</span><span class=\"token variable\">$http_proxy</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">https_proxy</span><span class=\"token operator\">=</span><span class=\"token variable\">$http_proxy</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HTTPS_PROXY</span><span class=\"token operator\">=</span><span class=\"token variable\">$http_proxy</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">no_proxy</span><span class=\"token operator\">=</span><span class=\"token string\">\"localhost,127.0.0.1\"</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">NO_PROXY</span><span class=\"token operator\">=</span><span class=\"token variable\">$no_proxy</span></code></pre></div>\n<h1 id=\"master-설정\" style=\"position:relative;\"><a href=\"#master-%EC%84%A4%EC%A0%95\" aria-label=\"master 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Master 설정</h1>\n<h2 id=\"jenkins-설치-및-포트-설정\" style=\"position:relative;\"><a href=\"#jenkins-%EC%84%A4%EC%B9%98-%EB%B0%8F-%ED%8F%AC%ED%8A%B8-%EC%84%A4%EC%A0%95\" aria-label=\"jenkins 설치 및 포트 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkins 설치 및 포트 설정</h2>\n<p><a href=\"https://linuxize.com/post/how-to-install-jenkins-on-centos-7\">https://linuxize.com/post/how-to-install-jenkins-on-centos-7</a> 참고.</p>\n<p>80포트로 사용할 수 있도록 설정</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> -i\niptables -A PREROUTING -t nat -i eth0 -p tcp --dport <span class=\"token number\">80</span> -j REDIRECT --to-port <span class=\"token number\">8080</span>\niptables-save</code></pre></div>\n<p>jenkins계정 패스워드 삭제 및 로그인 가능하게 하기</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> -i\n<span class=\"token function\">passwd</span> -d jenkins\n<span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/passwd\n\n<span class=\"token comment\"># jenkins 라인 마지막 /bin/false를 /bin/bash로 변경</span></code></pre></div>\n<h2 id=\"인증-키-설정\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9D-%ED%82%A4-%EC%84%A4%EC%A0%95\" aria-label=\"인증 키 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인증 키 설정</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">su</span> - jenkins\n<span class=\"token function\">mkdir</span> .ssh\n<span class=\"token builtin class-name\">cd</span> .ssh\nssh-keygen\n\n<span class=\"token comment\"># id_rsa, id_rsa.pub생성됨</span></code></pre></div>\n<p>github.com 로그인 후 <code class=\"language-text\">Settings &gt; Developer settings &gt; Personal access tokens</code> 에서 새 토큰을 등록하고 이 값을 Jenkins 의 Crediential 에 Secret text 로 등록해둔다</p>\n<h2 id=\"플러그인-설치-및-설정\" style=\"position:relative;\"><a href=\"#%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%84%A4%EC%A0%95\" aria-label=\"플러그인 설치 및 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>플러그인 설치 및 설정</h2>\n<p>아래 플러그인들 설치</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">NodeJS, AnsiColor, GitHub Pull Request Builder, Publish Over SSH</code></pre></div>\n<p><code class=\"language-text\">Jenkins 관리 &gt; Global Tool Configuration &gt; NodeJS</code> 항목 추가</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Name: NodeJS 10.15.3\nVersion: NodeJS 10.15.3\nGlobal npm packages to install: typescript@3.5.3 ts-node@8.8.2 @angular/cli@8.2.0 @sentry/cli@1.52.1</code></pre></div>\n<p>각 전역 패키지들의 버전을 명시해 두는게 좋음</p>\n<p>사내 npm을 사용중이라면 <code class=\"language-text\">Jenkins 관리 &gt; Managed Files &gt; Npm config file</code> 을 추가하여 설정.</p>\n<h2 id=\"환경변수-설정\" style=\"position:relative;\"><a href=\"#%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EC%84%A4%EC%A0%95\" aria-label=\"환경변수 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>환경변수 설정</h2>\n<p><code class=\"language-text\">Jenkins 관리 &gt; 시스템 설정 &gt; Global properties &gt; Environment variables</code> 에 아래 값들 추가</p>\n<p>위의 두 값은 언어 설정때문에 필요하고. 아래 프록시 설정은 해당할때만 추가한다</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">이름: JAVA_TOOLS_OPTIONS\n값: -Dfile.encoding=UTF-8\n\n이름: LANG\n값: ko_KR.UTF-8\n\n이름: HTTP_PROXY\n값: 프록시 주소\n\n이름: HTTPS_PROXY\n값: 프록시 주소\n\n이름: NO_PROXY\n값: 프록시 타면 안되는 도메인들</code></pre></div>\n<h1 id=\"slave-설정\" style=\"position:relative;\"><a href=\"#slave-%EC%84%A4%EC%A0%95\" aria-label=\"slave 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Slave 설정</h1>\n<p>jenkins 계성 생성 및 패스워드 삭제</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> i\n<span class=\"token function\">useradd</span> -d /var/lib/jenkins jenkins\n<span class=\"token function\">passwd</span> -d jenkins\n<span class=\"token builtin class-name\">exit</span></code></pre></div>\n<p>jenkins 계정에 ssh 키 추가후 Master 노드가 접근할 수 있도록 등록</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">su</span> - jenkins\n<span class=\"token function\">mkdir</span> .ssh\n<span class=\"token builtin class-name\">cd</span> .ssh\n<span class=\"token function\">vim</span> authorized_keys\n\n<span class=\"token comment\"># Master 노드의 인증서 설정에서 만든 id_rsa.pub의 컨텐츠를 붙여넣고 저장</span></code></pre></div>","frontmatter":{"categories":["development"],"tags":["jenkins"],"title":"FrontEnd 개발을 위한 Jenkins CI서버 세팅하기"},"fields":{"slug":"/post/frontend-개발을-위한-jenkins설치","date":"2020-04-17T00:00:00.000+09:00"},"headings":[{"value":"Master, Slave 공통","depth":1},{"value":"Master 설정","depth":1},{"value":"Jenkins 설치 및 포트 설정","depth":2},{"value":"인증 키 설정","depth":2},{"value":"플러그인 설치 및 설정","depth":2},{"value":"환경변수 설정","depth":2},{"value":"Slave 설정","depth":1}]}},"pageContext":{"pageId":"00b84a18-10da-586d-8971-24a5774ad8ef","previousPagePath":"","previousPageId":"","nextPagePath":"/post/좋은-코드를-위한-생각들","nextItem":{"node":{"id":"2f249d12-de77-5f0b-b4a2-560c9aa25d5d","fields":{"slug":"/post/좋은-코드를-위한-생각들"}}},"nextPageId":"2f249d12-de77-5f0b-b4a2-560c9aa25d5d"}}}